当一个请求到达Express的服务器之后，可以连续调用多个中间件，从而对这次请求进行预处理

客户端      》请》求》 （中间件一  》》中间件二 》》中间件n 》》处理完毕，响应这次请求 ）  》响》应  客户端
上一个中间件的输出会作为下一个中间件输入
（）内部是Express服务器

Express的中间件 本质上就是一个function处理函数

next()函数就可以实现多个中间键连续调用的关键，他表示把流转关系转交给下一个中间件或者路由
即为中间件一调用完毕，调用next(),然后流转到了中间件二


中间件的注意事项
一定要在路由之前定义中间件，如果写在后面，中间件就没法正常工作（除了错误级别的中间件）
客户端发送过来的请求，可以连续调用多个中间件进行处理
执行完中间件的业务代码之后，不要忘记调用next()函数
为了防止代码逻辑混乱，调用next()函数后就不要再写额外的代码
连续调用多个中间件时，多个中间件之间，共享req和res对象


中间件的分类
Express官方把常见的中间件用法分为了五类 

应用级别的中间件

通过app.use()或者app.get()或者app.post(), 绑定到app实例上的中间件


路由级别的中间件

绑定到express.Router()实例上的中间件，叫做路由级别的中间件，他的用法和应用级别中间件没有任何区别，
只不过，应用级别中间件是绑定到app实例上的，路由级别中间件绑定到Router实例上
var router=express.Router()

错误级别的中间件

错误级别中间件的作用，就是用来专门捕获整个项目中发生的异常错误，从而防止项目异常崩溃的问题
格式  错误级别中间件的function处理函数，必须要有四个形参，先后顺序依次是， (err,req,res,next);
err 就可以捕获到异常  比如 路由里人为抛出的异常  throw new Error('服务器发生了错误!')
⭐⭐⭐⭐⭐⭐⭐  错误级别的中间件，必须注册在所有路由之后(放在之前，就不会正常工作)



Express内置的中间件

自Express 4.16.0版本开始，Express内置了三个常用的中间件，极大的提高了Express项目的开发效率和体验
一  Express.static  快速托管静态资源的内置中间件，例如HTML文档，图片，css文件，js文件等
(无兼容性，即为在任何Express版本都可以正常使用)

二  express.json 解析json格式的请求体数据(有兼容性，只在4.16.0版本及其之后可以使用)
        配置解析applicat ion/json格式数据的内置中间件，只需要执行这一句即可
app.use(express.json())

三  express.urlencoded解析URL-encoded格式的请求体数据(有兼容性，只在4.16.0版本及其之后可以使用)
3 1/ 配置解析application/x-ww form-ur lencoded格式数据的内置中间件，只需要执行这一句即可
app ,use(express .urlencoded({ extended:false }))


第三方的中间件
非Express言方内置的，而是由第三方开发出来的中间件，叫做第三方中间件。在项目中，大家可以按需下载并配置
第三方中间件,从而提高项目的开发效率。
例如:在express@4.16.0之前的版本中，经常使用body-parser这个第三方中间件,来解析请求体数据。使用步骤如下:
①运行npm install body parser安装中间件
②使用require导入中间件
③调用app.use()注册并使用中间件


注意 Express内置的 express.urlencoded中间件，就是基于body-parser这个第三方中间件进一步封装出来的